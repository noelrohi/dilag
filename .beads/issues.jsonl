{"id":"dilag-075","title":"Add native macOS menu bar","description":"Added native macOS menu bar with:\n- App menu (About, Settings, Check for Updates, Quit)\n- File menu (New Session, Close Window)\n- Edit menu (Undo, Redo, Cut, Copy, Paste, Select All)\n- View menu (Toggle Sidebar, Toggle Chat, Full Screen)\n- Help menu (Docs, GitHub, Report Issue)\n\nMenu events are emitted to frontend for handling.\n\nFiles: src-tauri/src/lib.rs","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-18T15:34:11.227672+08:00","updated_at":"2025-12-18T22:47:28.032503+08:00","closed_at":"2025-12-18T22:47:28.032503+08:00","close_reason":"Already implemented in codebase"}
{"id":"dilag-0ya","title":"Move website to apps/website/","description":"Move the landing page website from separate repo to apps/website/.\n\n## Source\n~/sandbox/dilag-website/\n\n## Files to move\n- src/ → apps/website/src/\n- public/ → apps/website/public/\n- package.json → apps/website/package.json\n- next.config.ts → apps/website/next.config.ts\n- tsconfig.json → apps/website/tsconfig.json\n- postcss.config.mjs → apps/website/postcss.config.mjs\n- components.json → apps/website/components.json\n\n## After migration\n- Delete ~/sandbox/dilag-website/ directory\n- Verify Next.js build works from apps/website/\n- Test dev server","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-18T17:49:28.862423+08:00","updated_at":"2025-12-18T17:50:50.496152+08:00","closed_at":"2025-12-18T17:50:50.496152+08:00","close_reason":"Closed"}
{"id":"dilag-0zj","title":"Move desktop app to apps/desktop/","description":"Move the current desktop app files to apps/desktop/ subdirectory.\n\n## Files to move\n- src/ → apps/desktop/src/\n- src-tauri/ → apps/desktop/src-tauri/\n- public/ → apps/desktop/public/\n- index.html → apps/desktop/index.html\n- package.json → apps/desktop/package.json\n- tsconfig.json → apps/desktop/tsconfig.json\n- vite.config.ts → apps/desktop/vite.config.ts\n- vitest.config.ts → apps/desktop/vitest.config.ts\n- components.json → apps/desktop/components.json\n\n## Update paths\n- Update vite.config.ts paths if needed\n- Update tsconfig paths if needed\n- Update Cargo.toml paths in src-tauri\n- Verify Tauri build still works\n\n## Keep at root\n- .github/\n- docs/\n- .beads/\n- AGENTS.md, CLAUDE.md, README.md\n- .gitignore (update for monorepo)","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-18T17:49:14.263038+08:00","updated_at":"2025-12-18T17:50:45.358206+08:00","closed_at":"2025-12-18T17:50:45.358206+08:00","close_reason":"Closed"}
{"id":"dilag-1fj","title":"Improve transparent title bar with native background","description":"Enhanced window appearance:\n- Transparent title bar style on macOS\n- Native window background color using cocoa (#16161c)\n- Hidden window title\n- Window created programmatically instead of via tauri.conf.json\n- Theme provider for system/light/dark theme support\n\nFiles: src-tauri/src/lib.rs, src-tauri/tauri.conf.json, src/index.css, index.html","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-18T15:34:45.236479+08:00","updated_at":"2025-12-18T22:47:28.031997+08:00","closed_at":"2025-12-18T22:47:28.031997+08:00","close_reason":"Already implemented in codebase"}
{"id":"dilag-1s3","title":"Redesign auth provider dialogs","description":"Redesigned DialogSelectProvider and DialogConnectProvider with refined aesthetic matching OpenCode pattern. Added collapsible 'Other providers' section.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-18T22:39:15.696371+08:00","updated_at":"2025-12-18T22:39:55.765633+08:00","closed_at":"2025-12-18T22:39:55.765633+08:00","close_reason":"Completed in this session"}
{"id":"dilag-272","title":"Redesign settings page layout","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T01:12:03.150073+08:00","updated_at":"2025-12-19T01:12:14.630224+08:00","closed_at":"2025-12-19T01:12:14.630224+08:00","close_reason":"Work already completed in uncommitted changes"}
{"id":"dilag-2qz","title":"Add app distribution with code signing and auto-updates","description":"## Summary\nImplement free app distribution for macOS with:\n- Apple Developer ID code signing and notarization\n- Auto-update system with user prompt dialog\n- GitHub Actions CI/CD for building and releasing\n\n## Changes\n- Added `tauri-plugin-updater` and `tauri-plugin-process` for auto-updates\n- Configured macOS code signing in `tauri.conf.json`\n- Created GitHub Actions workflow for building, signing, notarizing, and releasing\n- Added `UpdateDialog` component with download progress\n- Added `useUpdater` hook for checking and installing updates\n\n## Testing\n1. Push changes and create a tag (e.g., `v0.1.0`)\n2. GitHub Actions will build and create a release\n3. Users can download from GitHub Releases\n4. App will prompt when updates are available","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-18T11:16:53.903168+08:00","updated_at":"2025-12-18T22:47:28.032721+08:00","closed_at":"2025-12-18T22:47:28.032721+08:00","close_reason":"Already implemented in codebase"}
{"id":"dilag-2yc","title":"Fix chat view scrolling and height","description":"Fixed Conversation component not scrolling: added proper flex layout with flex-1 min-h-0, removed conflicting overflow-y-auto from ConversationContent, fixed height calculation for viewport.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-16T12:27:29.057466+08:00","updated_at":"2025-12-16T12:27:55.080365+08:00","closed_at":"2025-12-16T12:27:55.080365+08:00"}
{"id":"dilag-3i4","title":"Improve tool registry with backend metadata","description":"Update tools to use metadata from opencode backend: read uses preview, bash shows exit code, glob/grep/list show counts and truncation, task shows sub-agent summary","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-17T11:16:47.841142+08:00","updated_at":"2025-12-17T11:17:13.596386+08:00","closed_at":"2025-12-17T11:17:13.596386+08:00","close_reason":"Closed"}
{"id":"dilag-3og","title":"Native macOS theme and window styling","description":"Updated theme to native macOS aesthetic: system fonts (SF Pro), macOS blue accent, warm neutral grays, subtle borders, vibrancy classes, refined shadows. Configured Tauri window with visible title bar and matching background color.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-16T12:27:22.824106+08:00","updated_at":"2025-12-16T12:27:55.080096+08:00","closed_at":"2025-12-16T12:27:55.080096+08:00"}
{"id":"dilag-424","title":"Fix useDesigns hook causing repeated IPC calls","description":"","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-17T01:55:50.014366+08:00","updated_at":"2025-12-17T11:21:06.938036+08:00","closed_at":"2025-12-17T11:21:06.938036+08:00","close_reason":"Closed","deleted_at":"2025-12-17T02:52:18.068566+08:00","deleted_by":"git-history-backfill","delete_reason":"recovered from git history (pruned from manifest)","original_type":"bug"}
{"id":"dilag-441","title":"Add settings variant to ModelSelectorButton","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T01:11:37.520215+08:00","updated_at":"2025-12-19T01:12:14.628072+08:00","closed_at":"2025-12-19T01:12:14.628072+08:00","close_reason":"Work already completed in uncommitted changes"}
{"id":"dilag-4df","title":"Track Last-Event-ID for SSE resumption","description":"Track lastEventId from SSE events and send Last-Event-ID header on reconnection.\n\nThis allows the server to resume from where we left off, preventing duplicate events or missed updates during brief disconnections.\n\nNote: This is handled by the SDK's SSE client automatically, but we should verify it's working correctly.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-18T16:25:27.555164+08:00","updated_at":"2025-12-18T16:31:15.261788+08:00","closed_at":"2025-12-18T16:31:15.261788+08:00","close_reason":"SDK already tracks lastEventId and sends Last-Event-ID header on reconnection"}
{"id":"dilag-4jj","title":"Create session-store.tsx - Zustand store","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-16T02:12:12.74189+08:00","updated_at":"2025-12-16T02:14:33.062746+08:00","closed_at":"2025-12-16T02:14:33.062746+08:00"}
{"id":"dilag-4jz","title":"Add bootstrap pattern for state recovery after reconnection","description":"Implement bootstrapInstance() pattern for state recovery after SSE reconnection.\n\nWhen connection is re-established:\n- Reload sessions list\n- Reload current session messages and parts\n- Reload session status\n- Reload providers and config\n\nThis ensures UI stays in sync after temporary disconnections.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-18T16:25:17.0359+08:00","updated_at":"2025-12-18T16:31:04.971518+08:00","closed_at":"2025-12-18T16:31:04.971518+08:00","close_reason":"Implemented bootstrap pattern with resetRealtimeState and bootstrap effect","dependencies":[{"issue_id":"dilag-4jz","depends_on_id":"dilag-8li","type":"blocks","created_at":"2025-12-18T16:26:00.98166+08:00","created_by":"rohi"},{"issue_id":"dilag-4jz","depends_on_id":"dilag-5ue","type":"blocks","created_at":"2025-12-18T16:26:06.120985+08:00","created_by":"rohi"}]}
{"id":"dilag-4o4","title":"Fix transparent menu bar theme sync on macOS","description":"The transparent titlebar background color doesn't change when switching themes. Added set_titlebar_theme Tauri command that syncs the native macOS window background color with the frontend theme.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-19T15:45:11.218845+08:00","updated_at":"2025-12-19T15:45:23.30323+08:00","closed_at":"2025-12-19T15:45:23.30323+08:00","close_reason":"Closed"}
{"id":"dilag-52e","title":"Setup Bun workspaces in root package.json","description":"Create root package.json with Bun workspaces configuration.\n\n## Root package.json\n```json\n{\n  \"name\": \"dilag\",\n  \"private\": true,\n  \"workspaces\": [\n    \"apps/*\",\n    \"packages/*\"\n  ],\n  \"scripts\": {\n    \"dev\": \"bun run --filter @dilag/desktop dev\",\n    \"dev:web\": \"bun run --filter @dilag/website dev\",\n    \"build\": \"bun run --filter '*' build\",\n    \"build:desktop\": \"bun run --filter @dilag/desktop build\",\n    \"build:website\": \"bun run --filter @dilag/website build\",\n    \"tauri\": \"bun run --filter @dilag/desktop tauri\"\n  }\n}\n```\n\n## Update app package.json names\n- apps/desktop/package.json: name = \"@dilag/desktop\"\n- apps/website/package.json: name = \"@dilag/website\"\n\n## Verify\n- `bun install` from root works\n- `bun run dev` starts desktop app\n- `bun run dev:web` starts website","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-18T17:49:43.407172+08:00","updated_at":"2025-12-18T17:50:55.637882+08:00","closed_at":"2025-12-18T17:50:55.637882+08:00","close_reason":"Closed"}
{"id":"dilag-5sa","title":"Session isolation: Use ~/.dilag/** as session cwd","description":"## Problem\nOpenCode currently reads the project directory, making the agent aware of the dilag project itself. This is undesirable - each agent session should only be aware of its own sandbox.\n\n## Solution\n- Create ~/.dilag/\u003csession-id\u003e/ directory for each session\n- Set this as the cwd/working directory for the agent session\n- Agent will only see files within its session directory\n\n## Benefits\n- Session isolation: agents can't access or modify dilag source code\n- Clean sandbox: each session starts with a fresh, isolated workspace\n- Security: prevents agents from accidentally modifying the host project","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-15T22:35:53.532545+08:00","updated_at":"2025-12-15T22:44:59.50034+08:00","closed_at":"2025-12-15T22:44:59.50034+08:00"}
{"id":"dilag-5ue","title":"Add exponential backoff for SSE reconnection","description":"Implement exponential backoff with configurable limits for SSE connection retries.\n\nBased on OpenCode's implementation:\n- Default retry delay: 3000ms\n- Max retry delay: 30000ms (30s cap)\n- Backoff formula: min(retryDelay * 2^(attempt-1), maxRetryDelay)\n- Support server-controlled retry via SSE 'retry:' directive\n- Add sseMaxRetryAttempts option","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-18T16:24:55.11533+08:00","updated_at":"2025-12-18T16:30:54.688847+08:00","closed_at":"2025-12-18T16:30:54.688847+08:00","close_reason":"Implemented in global-events.tsx with exponential backoff (default 3s, max 30s, factor 2x)"}
{"id":"dilag-5us","title":"Default sidebar to closed state","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T01:11:49.974912+08:00","updated_at":"2025-12-19T01:12:14.629798+08:00","closed_at":"2025-12-19T01:12:14.629798+08:00","close_reason":"Work already completed in uncommitted changes"}
{"id":"dilag-5yt","title":"Add file attachments support in chat","description":"Enhanced chat input to support file attachments:\n- Added attachment menu with file picker\n- Display attached files with thumbnails\n- Show attached images in user messages\n- Support for pasting images directly\n\nFiles: src/components/blocks/chat-view.tsx, src/hooks/use-sessions.ts","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-18T15:34:33.960084+08:00","updated_at":"2025-12-18T22:47:28.032177+08:00","closed_at":"2025-12-18T22:47:28.032177+08:00","close_reason":"Already implemented in codebase"}
{"id":"dilag-60o","title":"Add toast notification for available updates","description":"Show a persistent toast notification when an update is available, with version number and 'Update Now' action button.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-19T15:45:11.862602+08:00","updated_at":"2025-12-19T15:45:23.685767+08:00","closed_at":"2025-12-19T15:45:23.685767+08:00","close_reason":"Closed"}
{"id":"dilag-65y","title":"Remove debug events tool from page","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-16T11:54:39.98839+08:00","updated_at":"2025-12-16T12:27:55.078219+08:00","closed_at":"2025-12-16T12:27:55.078219+08:00"}
{"id":"dilag-6yp","title":"Fix: Open auth page button not working in Tauri","description":"","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-15T22:06:01.059557+08:00","updated_at":"2025-12-15T22:06:13.390519+08:00","closed_at":"2025-12-15T22:06:13.390519+08:00"}
{"id":"dilag-718","title":"Refactor use-sessions to use new architecture","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-16T02:12:38.388432+08:00","updated_at":"2025-12-16T02:22:34.733907+08:00","closed_at":"2025-12-16T02:22:34.733907+08:00"}
{"id":"dilag-779","title":"Create diff-viewer component","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-16T02:12:33.264069+08:00","updated_at":"2025-12-16T02:22:34.734516+08:00","closed_at":"2025-12-16T02:22:34.734516+08:00"}
{"id":"dilag-83z","title":"Add Dilag app icon - morph D design","description":"Created distinctive app icon for Dilag featuring the 'morph' concept:\n\n- Ghost rectangle (outline) representing the input/prompt state\n- Solid organic D-shape representing the transformed output/design\n- Dark gradient background matching the app's dark theme (oklch 0.16 0.01 260)\n- Proper macOS icon padding for correct dock sizing\n\nFiles added/modified:\n- app-icon.png - Main icon source with padding\n- icon-source.svg - Vector source for the icon design\n- src-tauri/icons/* - Generated icon assets for all platforms\n\nThe icon symbolizes Dilag's core function: transforming prompts into mobile UI designs.","status":"closed","priority":2,"issue_type":"chore","created_at":"2025-12-18T01:07:39.627258+08:00","updated_at":"2025-12-18T01:07:50.778826+08:00","closed_at":"2025-12-18T01:07:50.778826+08:00","close_reason":"Closed"}
{"id":"dilag-8ae","title":"Use Field components in auth forms","description":"Refactored DialogConnectProvider to use Field, FieldLabel, FieldDescription components for consistent form styling.","status":"closed","priority":2,"issue_type":"chore","created_at":"2025-12-18T22:39:37.781619+08:00","updated_at":"2025-12-18T22:39:55.767379+08:00","closed_at":"2025-12-18T22:39:55.767379+08:00","close_reason":"Completed in this session"}
{"id":"dilag-8io","title":"Debug pane for OpenCode events","description":"Collapsible debug pane showing raw events from OpenCode server with filtering and JSON expansion","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-16T02:02:28.212507+08:00","updated_at":"2025-12-16T02:02:39.042451+08:00","closed_at":"2025-12-16T02:02:39.042451+08:00"}
{"id":"dilag-8k4","title":"Add Anthropic auth settings and upgrade to claude-opus-4-5","description":"Add ability to connect/disconnect Anthropic provider via OAuth and upgrade default model to claude-opus-4-5.","acceptance_criteria":"- [x] Settings button (gear icon) in header\n- [x] Auth dialog shows Anthropic connection status\n- [x] Connect button initiates OAuth flow (opens browser)\n- [x] User can paste authorization code to complete auth\n- [x] Disconnect button removes provider connection\n- [x] Default model updated to claude-opus-4-5\n- [x] Auth API functions added (getProviders, startOAuthFlow, completeOAuthFlow, disconnectProvider)","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-15T22:03:34.396424+08:00","updated_at":"2025-12-15T22:03:45.909431+08:00","closed_at":"2025-12-15T22:03:45.909431+08:00"}
{"id":"dilag-8k8","title":"Enhanced tool-registry with syntax highlighting and diff support","description":"","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-16T20:36:41.812048+08:00","updated_at":"2025-12-16T20:37:06.738873+08:00","closed_at":"2025-12-16T20:37:06.738873+08:00"}
{"id":"dilag-8li","title":"Handle server disposal events for SSE reconnection","description":"Handle 'server.instance.disposed' and 'global.disposed' events to trigger automatic re-bootstrap of state.\n\nWhen these events occur:\n- global.disposed: Re-bootstrap entire application state\n- server.instance.disposed: Re-bootstrap specific directory instance\n\nThis enables automatic recovery when the OpenCode server restarts.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-18T16:25:06.194132+08:00","updated_at":"2025-12-18T16:30:59.830419+08:00","closed_at":"2025-12-18T16:30:59.830419+08:00","close_reason":"Implemented handling of global.disposed and server.instance.disposed events"}
{"id":"dilag-8o5","title":"Add settings link to sidebar footer","description":"Added settings gear icon button to session sidebar footer for quick access to settings page.\n\nFiles: src/components/blocks/session-sidebar.tsx","status":"closed","priority":2,"issue_type":"chore","created_at":"2025-12-18T15:35:21.438073+08:00","updated_at":"2025-12-18T22:40:07.959472+08:00","closed_at":"2025-12-18T22:40:07.959472+08:00","close_reason":"Settings link added to sidebar footer"}
{"id":"dilag-8to","title":"Add connection status UI indicators","description":"Add visual indicators for SSE connection status:\n- Connected (green)\n- Reconnecting (yellow) with attempt count\n- Disconnected (red)\n\nShow retry countdown when reconnecting. Display in header or status bar.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-18T16:25:47.214586+08:00","updated_at":"2025-12-18T16:32:29.733342+08:00","closed_at":"2025-12-18T16:32:29.733342+08:00","close_reason":"Implemented connection status indicator in session-sidebar.tsx with color-coded dot and tooltip"}
{"id":"dilag-96d","title":"Disable fetch timeout for SSE connections","description":"Ensure fetch timeout is disabled for SSE connections to prevent premature disconnection in production.\n\nOpenCode sets req.timeout = false for SSE requests. We should verify the SDK is doing this or implement it ourselves.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-18T16:25:37.243047+08:00","updated_at":"2025-12-18T16:31:10.116804+08:00","closed_at":"2025-12-18T16:31:10.116804+08:00","close_reason":"SDK already handles this. Added custom fetch wrapper as extra safety."}
{"id":"dilag-99t","title":"Add edit tool with diff support","description":"Add edit tool that displays unified diff from metadata.diff and shows additions/deletions count from metadata.filediff","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-17T11:16:37.902408+08:00","updated_at":"2025-12-17T11:17:08.453123+08:00","closed_at":"2025-12-17T11:17:08.453123+08:00","close_reason":"Closed"}
{"id":"dilag-9qs","title":"Redesign model selector component","description":"","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-18T23:40:36.618733+08:00","updated_at":"2025-12-18T23:41:05.326416+08:00","closed_at":"2025-12-18T23:41:05.326416+08:00","close_reason":"Implementation complete"}
{"id":"dilag-9vv","title":"Add screen thumbnail previews to project cards","description":"Add ProjectCard and ScreenThumbnail components to show design previews in recent projects list with scaled iframe rendering","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-17T10:59:29.067576+08:00","updated_at":"2025-12-17T11:00:03.727629+08:00","closed_at":"2025-12-17T11:00:03.727629+08:00","close_reason":"Closed"}
{"id":"dilag-ank","title":"Simplify CSS - remove unused macOS-specific styles","description":"Remove vibrancy, shadow-mac, status-dot, window-drag, and other unused macOS-specific CSS utilities","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T10:59:24.751038+08:00","updated_at":"2025-12-17T10:59:48.261722+08:00","closed_at":"2025-12-17T10:59:48.261722+08:00","close_reason":"Closed"}
{"id":"dilag-ax3","title":"Add Settings page with app info and reset data","description":"Added Settings page accessible via menu or sidebar with:\n- App version display\n- Data directory location\n- Data size calculation\n- Reset all data functionality (clears .dilag directory and restarts app)\n\nBackend: get_app_info and reset_all_data Tauri commands\nFrontend: src/routes/settings.tsx, src/routes/settings.lazy.tsx","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-18T15:34:22.963983+08:00","updated_at":"2025-12-18T22:47:28.032332+08:00","closed_at":"2025-12-18T22:47:28.032332+08:00","close_reason":"Already implemented in codebase"}
{"id":"dilag-bf7","title":"Remove design tool from registry","description":"Remove the design tool entry and simplify write tool to not have HTML-specific handling","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T11:16:28.277513+08:00","updated_at":"2025-12-17T11:17:03.305915+08:00","closed_at":"2025-12-17T11:17:03.305915+08:00","close_reason":"Closed"}
{"id":"dilag-bzx","title":"Add View All link to landing page","description":"Landing page only shows 4 recent projects. Add a 'View all X projects' link that opens the sidebar when there are more than 4 sessions.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-18T17:01:56.501352+08:00","updated_at":"2025-12-18T17:02:12.439902+08:00","closed_at":"2025-12-18T17:02:12.439902+08:00","close_reason":"Fixed in commit adcb1e2 - Added ViewAllButton component that opens sidebar"}
{"id":"dilag-ccs","title":"Add menu event handling in frontend","description":"Added frontend handling for native menu events:\n- MenuEventsProvider context\n- Hooks for menu event subscription\n- Navigation to settings on menu click\n- New session creation from menu\n- Toggle sidebar/chat from menu\n\nFiles: src/context/menu-events.tsx, src/routes/__root.tsx","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-18T15:35:00.135173+08:00","updated_at":"2025-12-18T22:47:28.031826+08:00","closed_at":"2025-12-18T22:47:28.031826+08:00","close_reason":"Already implemented in codebase"}
{"id":"dilag-cfn","title":"Implement Warm Paper color theme","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T01:11:43.698219+08:00","updated_at":"2025-12-19T01:12:14.629528+08:00","closed_at":"2025-12-19T01:12:14.629528+08:00","close_reason":"Work already completed in uncommitted changes"}
{"id":"dilag-dpc","title":"Redesign session sidebar UI","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-16T02:12:28.135358+08:00","updated_at":"2025-12-16T02:22:15.752385+08:00","closed_at":"2025-12-16T02:22:15.752385+08:00"}
{"id":"dilag-e9x","title":"Add model selector to chat composer","description":"","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-16T12:42:56.601514+08:00","updated_at":"2025-12-16T12:44:53.767368+08:00","closed_at":"2025-12-16T12:44:53.767368+08:00"}
{"id":"dilag-eah","title":"Update sidebar layout for native window","description":"Simplified sidebar header with New button and toggle. Added sidebar trigger in main header when collapsed. Removed traffic light spacing after switching to visible title bar.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-16T12:27:42.248794+08:00","updated_at":"2025-12-16T12:27:55.080896+08:00","closed_at":"2025-12-16T12:27:55.080896+08:00"}
{"id":"dilag-er1","title":"Add bd issue tracker documentation to AGENTS.md and CLAUDE.md","description":"Document bd CLI commands and AI integration in project agents files","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T10:59:21.738687+08:00","updated_at":"2025-12-17T10:59:37.969357+08:00","closed_at":"2025-12-17T10:59:37.969357+08:00","close_reason":"Closed"}
{"id":"dilag-ezp","title":"Improved tool-part UI with elapsed timer and shimmer effects","description":"","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-16T20:36:48.119486+08:00","updated_at":"2025-12-16T20:37:06.739931+08:00","closed_at":"2025-12-16T20:37:06.739931+08:00"}
{"id":"dilag-ffd","title":"OpenCode Session \u0026 Chat Integration","description":"Integrate OpenCode SDK to create sessions and chat. Tauri manages the server process, sessions stored in ~/.dilag/sessions/. UI includes session sidebar + chat view.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-15T21:42:24.663652+08:00","updated_at":"2025-12-15T21:48:58.726671+08:00","closed_at":"2025-12-15T21:48:58.726671+08:00"}
{"id":"dilag-fh5","title":"Add Dilag logo component","description":"Created reusable DilagLogo SVG component for branding consistency.\n\nFiles: src/components/ui/dilag-logo.tsx","status":"closed","priority":2,"issue_type":"chore","created_at":"2025-12-18T15:35:31.05621+08:00","updated_at":"2025-12-18T22:47:28.031298+08:00","closed_at":"2025-12-18T22:47:28.031298+08:00","close_reason":"Already implemented in codebase"}
{"id":"dilag-g55","title":"Update typography to IBM Plex + Rubik fonts","description":"Replace system fonts with IBM Plex Mono, IBM Plex Serif, and Rubik for consistent branding","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-17T10:59:23.165486+08:00","updated_at":"2025-12-17T10:59:43.115269+08:00","closed_at":"2025-12-17T10:59:43.115269+08:00","close_reason":"Closed"}
{"id":"dilag-gqz","title":"Refactor tool renderers to data-driven registry","description":"Replace 12 boilerplate tool renderer files with single tool-registry.tsx config + ToolPart component","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-16T02:02:50.304482+08:00","updated_at":"2025-12-16T02:03:03.272488+08:00","closed_at":"2025-12-16T02:03:03.272488+08:00"}
{"id":"dilag-hiu","title":"Migrate to monorepo structure with apps/ directory","description":"Reorganize the project into a monorepo structure:\n\n## Target Structure\n```\ndilag/\n├── apps/\n│   ├── desktop/          # Current Tauri app\n│   └── website/          # Next.js landing page\n├── packages/             # Shared code (future)\n├── package.json          # Root workspace config\n├── turbo.json            # (optional) Turborepo config\n└── ...\n```\n\n## Tasks\n1. Create apps/ directory structure\n2. Move desktop app files to apps/desktop/\n3. Move website from ~/sandbox/dilag-website to apps/website/\n4. Update root package.json with Bun workspaces\n5. Update all import paths if needed\n6. Update .github/workflows for monorepo\n7. Update AGENTS.md and documentation\n8. Delete separate dilag-website directory\n\n## Notes\n- Use Bun workspaces for package management\n- Consider Turborepo for build orchestration (optional)\n- Keep git history intact where possible","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-18T17:48:59.664462+08:00","updated_at":"2025-12-18T17:50:40.215068+08:00","closed_at":"2025-12-18T17:50:40.215068+08:00","close_reason":"Closed"}
{"id":"dilag-hve","title":"Reduce message gap in chat view","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T11:16:17.971239+08:00","updated_at":"2025-12-17T11:16:58.158778+08:00","closed_at":"2025-12-17T11:16:58.158778+08:00","close_reason":"Closed"}
{"id":"dilag-is3","title":"Update color palette to Silver/Slate theme","description":"Changed app color palette from cyan to Silver/Slate (hue 250) to complement the app icon. Monochromatic, sophisticated palette for both light and dark themes.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-18T22:39:44.386686+08:00","updated_at":"2025-12-18T22:39:55.767643+08:00","closed_at":"2025-12-18T22:39:55.767643+08:00","close_reason":"Completed in this session"}
{"id":"dilag-jh8","title":"Migrate from deprecated cocoa crate to objc2-app-kit","description":"The cocoa crate is deprecated and generates 7 warnings during build:\n\n```\nwarning: use of deprecated type alias `cocoa::base::id`: use the objc2 crate instead\nwarning: use of deprecated associated function `cocoa::appkit::NSColor::colorWithRed_green_blue_alpha_`: use the objc2-app-kit crate instead\nwarning: use of deprecated constant `cocoa::base::nil`: use the objc2 crate instead\nwarning: use of deprecated trait `cocoa::appkit::NSColor`: use the objc2-app-kit crate instead\nwarning: use of deprecated trait `cocoa::appkit::NSWindow`: use the objc2-app-kit crate instead\nwarning: use of deprecated method `cocoa::appkit::NSWindow::setBackgroundColor_`: use the objc2-app-kit crate instead\n```\n\n## Solution\nReplace `cocoa` crate with `objc2` and `objc2-app-kit` crates for setting the native window background color.\n\n## Files\n- src-tauri/Cargo.toml (update dependencies)\n- src-tauri/src/lib.rs (update imports and API calls)","status":"closed","priority":2,"issue_type":"chore","created_at":"2025-12-18T15:41:02.099562+08:00","updated_at":"2025-12-18T15:42:59.49335+08:00","closed_at":"2025-12-18T15:42:59.493361+08:00"}
{"id":"dilag-k1s","title":"Add multi-provider OAuth support to auth settings","description":"","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-16T12:54:16.253949+08:00","updated_at":"2025-12-16T12:56:16.705966+08:00","closed_at":"2025-12-16T12:56:16.705966+08:00"}
{"id":"dilag-k6z","title":"Fix tool part truncation - stats should not be cut off","description":"Tool parts like Write, Edit, Read show filename + stats (e.g. +223 lines), but the stats get truncated when filename is long.\n\nFix: Split subtitle into structured format with truncatable text and fixed suffix parts.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-18T17:01:51.337629+08:00","updated_at":"2025-12-18T17:02:07.293418+08:00","closed_at":"2025-12-18T17:02:07.293418+08:00","close_reason":"Fixed in commit 25987d2 - Added StructuredSubtitle type with text (truncatable) and suffix (fixed) parts"}
{"id":"dilag-kjt","title":"Fix: Image not sent after redirect from landing page","description":"When pasting an image on the landing page and submitting, the image was not being sent to the chat after redirect to the studio page.\n\n## Root Cause\n- Landing page's handleSubmit only stored text in localStorage, ignoring the files array\n- Studio page only retrieved text and called sendMessage(initialPrompt) without files\n\n## Fix\n- Updated index.lazy.tsx to store files as JSON in localStorage (dilag-initial-files)\n- Updated studio.$sessionId.lazy.tsx to retrieve and parse files, passing them to sendMessage(text, files)\n\n## Files Changed\n- src/routes/index.lazy.tsx\n- src/routes/studio.$sessionId.lazy.tsx","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-18T15:33:37.972887+08:00","updated_at":"2025-12-18T15:33:49.230648+08:00","closed_at":"2025-12-18T15:33:49.230665+08:00"}
{"id":"dilag-kpn","title":"Create global-events.tsx - Event stream manager","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-16T02:12:07.615071+08:00","updated_at":"2025-12-16T02:13:29.643707+08:00","closed_at":"2025-12-16T02:13:29.643707+08:00"}
{"id":"dilag-l5e","title":"Fix GitHub Actions release workflow for macOS code signing","description":"The release workflow was failing during code signing/notarization with 'The operation was canceled' error.\n\n## Issues Found\n1. `signingIdentity: \"-\"` was hardcoded in tauri.conf.json, overriding the APPLE_SIGNING_IDENTITY env var\n2. Build step had no timeout, could fail silently during long notarization\n3. Missing APPLE_TEAM_ID secret (required for notarization)\n\n## Fixes\n- Removed hardcoded signingIdentity from tauri.conf.json (uses env var now)\n- Added timeout-minutes: 30 to build step\n- Documented required APPLE_TEAM_ID secret\n\n## Required Secrets\n- APPLE_CERTIFICATE\n- APPLE_CERTIFICATE_PASSWORD  \n- APPLE_ID (email)\n- APPLE_PASSWORD (app-specific password, not Apple ID password)\n- APPLE_SIGNING_IDENTITY\n- APPLE_TEAM_ID (10-char team ID) - WAS MISSING\n- TAURI_SIGNING_PRIVATE_KEY\n- TAURI_SIGNING_PRIVATE_KEY_PASSWORD","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-18T16:09:41.430568+08:00","updated_at":"2025-12-18T16:10:02.175745+08:00","closed_at":"2025-12-18T16:10:02.175924+08:00"}
{"id":"dilag-l64","title":"TkDodo/KCD Refactoring Plan","description":"Refactoring based on TkDodo (React Query) and Kent C. Dodds patterns.\n\n## Completed\n\n### Phase 1: Foundation (Testing \u0026 Error Boundaries)\n- [x] Setup Vitest + React Testing Library\n- [x] Add Error Boundaries (root, message-part, design-canvas)\n- [x] Write initial tests for session-store.tsx (19 tests)\n\n### Phase 2: Data Fetching Architecture\n- [x] Setup TanStack Query with DevTools\n- [x] Migrate use-designs.tsx to React Query (with polling)\n- [x] Migrate use-models.tsx to React Query\n- [x] Hybrid architecture: React Query for server state, Zustand for SSE real-time\n- [x] Create use-session-data.ts with query keys and mutations\n\n### Phase 3: Component \u0026 Hook Refactoring\n- [x] ~~Split prompt-input.tsx~~ - Analyzed: shadcn component kept as-is (1,414 lines intentional)\n- [x] ~~Split use-sessions.tsx~~ - Analyzed: cohesive 324-line facade hook kept as-is\n\n\u003e **Decision:** After usage audit, both files follow KCD/TkDodo principles as-is.\n\u003e prompt-input.tsx is a shadcn template with optional features for future use.\n\u003e use-sessions.tsx is a single cohesive feature hook at reasonable size.\n\n### Phase 4: Code Quality Polish\n- [x] Add Suspense/Code Splitting for routes (lazy loading)\n  - Created index.lazy.tsx and studio.$sessionId.lazy.tsx\n  - Updated route files to minimal definitions\n  - Added Suspense with loading fallback in __root.tsx\n  - TanStack Router automatically lazy loads the components\n- [x] Standardize hook file extensions (.ts for non-JSX hooks)\n  - Renamed use-designs.tsx → use-designs.ts\n  - Renamed use-models.tsx → use-models.ts\n  - Renamed use-sessions.tsx → use-sessions.ts\n- [x] Add more integration tests\n  - Created use-designs.test.ts (basic export testing)\n  - Created use-sessions.test.ts (basic integration testing)\n  - All tests pass (23 total tests)","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-17T12:02:26.081889+08:00","updated_at":"2025-12-17T12:47:36.632702+08:00","closed_at":"2025-12-17T12:47:36.632702+08:00","close_reason":"Closed"}
{"id":"dilag-ljz","title":"Redesign message display \u0026 streaming UI","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-16T02:12:23.003176+08:00","updated_at":"2025-12-16T02:22:15.751197+08:00","closed_at":"2025-12-16T02:22:15.751197+08:00"}
{"id":"dilag-nyi","title":"Fix OpenCode API message parsing","description":"Messages were showing as empty bubbles because the SDK wasn't passing the model parameter correctly. Root cause: OpenCode API requires model as object { providerID, modelID } not a string.","acceptance_criteria":"- [x] Messages from assistant display with actual content\n- [x] Model parameter correctly formatted as { providerID: \"anthropic\", modelID: \"...\" }\n- [x] Switch from SDK to direct fetch calls for proper control\n- [x] Session messages load when switching sessions\n- [x] Text extracted correctly from message parts with type: \"text\"","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-15T22:03:04.571873+08:00","updated_at":"2025-12-15T22:03:19.789306+08:00","closed_at":"2025-12-15T22:03:19.789306+08:00"}
{"id":"dilag-o2a","title":"Cleanup chat-view component","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-16T20:36:54.389768+08:00","updated_at":"2025-12-16T20:37:06.740216+08:00","closed_at":"2025-12-16T20:37:06.740216+08:00"}
{"id":"dilag-p38","title":"Render tool calls and other message part types","description":"","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-16T01:18:42.768841+08:00","updated_at":"2025-12-16T01:30:05.095451+08:00","closed_at":"2025-12-16T01:30:05.095451+08:00"}
{"id":"dilag-pt9","title":"Keep designer agent prompt synced with frontend-design skill","description":"The DESIGNER_AGENT_PROMPT in src-tauri/src/lib.rs should stay aligned with the frontend-design Claude Code skill best practices.\n\nKey areas to monitor:\n- Typography guidelines and font recommendations\n- Motion/animation patterns\n- Background/texture techniques  \n- Spatial composition principles\n- Anti-patterns (AI slop markers)\n\nWhen frontend-design skill updates, review and sync relevant changes to the designer prompt.","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-19T00:57:31.002568+08:00","updated_at":"2025-12-19T00:57:31.002568+08:00"}
{"id":"dilag-pvp","title":"Redesign projects page with cleaner layout","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T01:11:56.40696+08:00","updated_at":"2025-12-19T01:12:14.630011+08:00","closed_at":"2025-12-19T01:12:14.630011+08:00","close_reason":"Work already completed in uncommitted changes"}
{"id":"dilag-rff","title":"Redesign Recent Projects section with dedicated projects page","description":"- Changed header layout: 'Recent projects' on left, 'View all' link on right\n- Created new /projects route for viewing all projects\n- Projects page includes search, sort (recent/name), and time-based grouping\n- Maintains consistent design aesthetic with home page","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-18T17:09:22.624918+08:00","updated_at":"2025-12-18T22:47:28.029964+08:00","closed_at":"2025-12-18T22:47:28.029964+08:00","close_reason":"Already implemented in codebase"}
{"id":"dilag-rqm","title":"Add setup wizard for OpenCode CLI dependency check","description":"The app shows 'connecting' indefinitely when OpenCode CLI is not installed. Need a native wizard on first launch that:\n- Checks if opencode CLI is installed\n- Shows installation instructions if not found\n- Only proceeds to main app once OpenCode is available\n\nThis affects users running the bundled app who don't have opencode installed globally.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-18T17:42:25.846896+08:00","updated_at":"2025-12-18T17:42:44.727445+08:00","closed_at":"2025-12-18T17:42:44.727459+08:00"}
{"id":"dilag-snc","title":"Improve error boundary UI","description":"Redesigned error boundary fallback UI:\n- Full-height layout with title bar drag region\n- Centered error message with subtle icon\n- Cleaner, more minimal design\n- Development hint to check console\n\nFiles: src/components/ui/error-boundary.tsx","status":"closed","priority":2,"issue_type":"chore","created_at":"2025-12-18T15:35:11.049317+08:00","updated_at":"2025-12-18T22:47:28.031565+08:00","closed_at":"2025-12-18T22:47:28.031565+08:00","close_reason":"Already implemented in codebase"}
{"id":"dilag-svu","title":"Add streaming support for chat messages","description":"Use OpenCode event stream to show responses in real-time instead of waiting for complete response","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-15T22:31:41.874101+08:00","updated_at":"2025-12-15T22:31:57.054466+08:00","closed_at":"2025-12-15T22:31:57.054466+08:00"}
{"id":"dilag-u0c","title":"Migrate to OpenCode SDK v2 client","description":"Refactor to use @opencode-ai/sdk/v2/client instead of custom opencode.ts\n\nChanges:\n- Upgrade SDK from 1.0.153 to 1.0.162\n- Delete src/lib/opencode.ts (custom client)\n- Refactor global-events.tsx to use SDK event types\n- Refactor session-store.tsx: parts now stored by messageId (like OpenCode)\n- Update use-sessions.tsx for new store structure\n- Update chat-view.tsx and other components for new types\n\nFiles changed:\n- bun.lock, package.json (SDK upgrade)\n- src/lib/opencode.ts (deleted)\n- src/context/global-events.tsx\n- src/context/session-store.tsx\n- src/hooks/use-sessions.tsx\n- src/components/blocks/chat-view.tsx\n- src/components/blocks/auth-settings.tsx\n- src/components/blocks/debug-pane.tsx\n- src/components/blocks/message-part.tsx\n- src/components/blocks/tool-part.tsx\n- src/lib/tool-registry.tsx","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-16T11:52:13.812894+08:00","updated_at":"2025-12-16T11:53:17.649415+08:00","closed_at":"2025-12-16T11:53:17.649415+08:00"}
{"id":"dilag-ugt","title":"Tool call and message part rendering","description":"Render tool calls, reasoning, file, and step-start parts in chat messages with OpenCode parity","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-16T02:02:02.887148+08:00","updated_at":"2025-12-16T02:02:15.769344+08:00","closed_at":"2025-12-16T02:02:15.769344+08:00"}
{"id":"dilag-uhp","title":"Fix auth settings connection status after SDK migration","description":"","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-16T12:37:07.166397+08:00","updated_at":"2025-12-16T12:37:18.184154+08:00","closed_at":"2025-12-16T12:37:18.184154+08:00"}
{"id":"dilag-ur1","title":"Extend opencode.ts event types","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-16T02:12:17.872571+08:00","updated_at":"2025-12-16T02:16:21.294+08:00","closed_at":"2025-12-16T02:16:21.294+08:00"}
{"id":"dilag-w5c","title":"Add design generation skeleton and shimmer states","description":"Add DesignSkeleton component and shimmer loading states to Write tool for HTML design outputs with AnimatePresence transitions","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-17T10:59:26.651346+08:00","updated_at":"2025-12-17T10:59:53.421728+08:00","closed_at":"2025-12-17T10:59:53.421728+08:00","close_reason":"Closed"}
{"id":"dilag-wpk","title":"Isolate OpenCode config to ~/.dilag/config","description":"Create dedicated config directory at ~/.dilag/config/ with default opencode.json and pass OPENCODE_CONFIG_DIR env var when spawning server","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-15T23:03:22.950537+08:00","updated_at":"2025-12-15T23:03:34.777214+08:00","closed_at":"2025-12-15T23:03:34.777214+08:00"}
{"id":"dilag-xgi","title":"Redesign landing page with minimal aesthetic","description":"Simplify landing page with minimal header, centered prompt, cleaner typography and reduced visual clutter","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-17T10:59:27.694814+08:00","updated_at":"2025-12-17T10:59:58.574782+08:00","closed_at":"2025-12-17T10:59:58.574782+08:00","close_reason":"Closed"}
{"id":"dilag-ymu","title":"Add Toaster component for toast notifications","description":"Added sonner Toaster to root layout for success/error toast notifications when connecting providers.","status":"closed","priority":2,"issue_type":"chore","created_at":"2025-12-18T22:39:31.457483+08:00","updated_at":"2025-12-18T22:39:55.767088+08:00","closed_at":"2025-12-18T22:39:55.767088+08:00","close_reason":"Completed in this session"}
{"id":"dilag-zid","title":"Refactor messages to use ai-elements Message component","description":"Refactored UserMessage and AssistantMessage to use Message and MessageContent from ai-elements/message.tsx. Removed avatar from assistant messages. User messages now left-aligned.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-16T12:27:35.602087+08:00","updated_at":"2025-12-16T12:27:55.08068+08:00","closed_at":"2025-12-16T12:27:55.08068+08:00"}
